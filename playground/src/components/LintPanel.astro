---
import IconChevronUp from './icons/IconChevronUp.astro';
---
<div class="flex-shrink-0 bg-base-200 border-t border-base-300 flex flex-col max-h-[50vh]">
    <!-- Header bar - always visible -->
    <button
        class="h-8 flex-shrink-0 w-full flex items-center justify-between px-4 hover:bg-base-300/50 transition-colors cursor-pointer"
        data-on:click="$lintPanelOpen = !$lintPanelOpen"
    >
        <span class="text-xs font-bold uppercase tracking-wider flex items-center gap-2">
            <span class="badge badge-xs" data-class:badge-success="$lintOutput === ''" data-class:badge-error="$lintOutput !== ''"></span>
            <span data-text="$lintOutput === '' ? 'No Issues' : 'Lint Issues'">Lint Issues</span>
            <span
                class="text-base-content/50"
                data-show="$lintOutput !== ''"
                data-text="`(${($lintOutput.match(/Ã—/g) || []).length} errors)`"
            ></span>
        </span>
        <span
            class="transition-transform duration-200"
            data-class:rotate-180="$lintPanelOpen"
        >
            <IconChevronUp />
        </span>
    </button>

    <!-- Resizable content area -->
    <div
        class="overflow-auto font-mono text-xs bg-base-100 resize-y min-h-32 h-48"
        data-show="$lintPanelOpen"
    >
        <pre
            class="whitespace-pre-wrap p-4"
            data-class:text-success="$lintOutput === ''"
            data-class:text-error="$lintOutput !== ''"
            data-text="$lintOutput || 'No lint issues found.'"
        ></pre>
    </div>
</div>
